(function(){"use strict";var t={1653:function(t,e,a){var r=a(9242),o=a(3396);const n={class:"card"},i={class:"flex justify-content-start"},l={class:"flex justify-content-end"},u={class:"p-input-icon-left"},s=(0,o._)("i",{class:"pi pi-search"},null,-1),c=["src","alt"],d=["innerHTML"],p=["innerHTML"],f=["innerHTML"],h={key:0,class:"chart"};function v(t,e,a,r,v,m){const g=(0,o.up)("Button"),b=(0,o.up)("InputText"),y=(0,o.up)("Checkbox"),F=(0,o.up)("Column"),C=(0,o.up)("DataTable"),w=(0,o.up)("Chart");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",n,[(0,o.Wm)(C,{value:t.countries,paginator:!0,dataKey:"id",rows:5,rowsPerPageOptions:[5,10,20,50],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",filters:t.filters,"onUpdate:filters":e[2]||(e[2]=e=>t.filters=e),tableStyle:"min-width: 50rem"},{header:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o.Wm)(g,{label:"Clear All Favourite",onClick:e[0]||(e[0]=e=>t.clearFav())})]),(0,o._)("div",l,[(0,o._)("span",u,[s,(0,o.Wm)(b,{modelValue:t.filters["global"].value,"onUpdate:modelValue":e[1]||(e[1]=e=>t.filters["global"].value=e),placeholder:"Keyword Search"},null,8,["modelValue"])])])])),default:(0,o.w5)((()=>[(0,o.Wm)(F,{field:"favourite",header:"Favourite"},{body:(0,o.w5)((e=>[(0,o.Wm)(y,{modelValue:e.data.favourite,"onUpdate:modelValue":t=>e.data.favourite=t,binary:!0,onClick:a=>t.addToFavourite(e.data.id,e.data.favourite)},null,8,["modelValue","onUpdate:modelValue","onClick"])])),_:1}),(0,o.Wm)(F,{header:"Flag"},{body:(0,o.w5)((t=>[(0,o._)("img",{src:`${t.data.flag}`,alt:t.data.name,class:"w-6rem shadow-2 border-round"},null,8,c)])),_:1}),(0,o.Wm)(F,{field:"name",sortable:"",header:"Name"},{body:(0,o.w5)((e=>[(0,o._)("span",{innerHTML:t.highlightText(e.data.name)},null,8,d)])),_:1}),(0,o.Wm)(F,{field:"region",sortable:"",header:"Region"},{body:(0,o.w5)((e=>[(0,o._)("span",{innerHTML:t.highlightText(e.data.region)},null,8,p)])),_:1}),(0,o.Wm)(F,{field:"capital",sortable:"",header:"Capital"},{body:(0,o.w5)((e=>[(0,o._)("span",{innerHTML:t.highlightText(e.data.capital)},null,8,f)])),_:1})])),_:1},8,["value","filters"])]),t.chartData?((0,o.wg)(),(0,o.iD)("div",h,[(0,o.Wm)(w,{type:"bar",data:t.chartData,options:t.chartOptions,class:"h-30rem"},null,8,["data","options"])])):(0,o.kq)("",!0)],64)}a(2087),a(7658);var m=a(4870),g=a(4161),b=a(484),y=a(2724),F=a(3717),C=a(6709),w=a(3602),T=a(5558),k=(0,o.aZ)({name:"App",setup(){return{storedFavourite:[],chartData:(0,m.iH)(),chartOptions:(0,m.iH)(),metaKey:(0,m.iH)(!0),filters:(0,m.iH)({global:{value:null,matchMode:y.a6.CONTAINS},"country.region":{value:null,matchMode:y.a6.CONTAINS},"country.capital":{value:null,matchMode:y.a6.CONTAINS},"country.name":{value:null,matchMode:y.a6.CONTAINS}})}},data(){return{countries:[]}},components:{DataTable:b.Z,Column:F.Z,InputText:C.Z,Checkbox:w.Z,Button:T.Z},methods:{async fetchUsers(){const t=await g.Z.get("https://restcountries.com/v3.1/all");var e=t.data;const a=e.map(((t,e)=>{var a=t.capital;return Array.isArray(a)?a=a.join(", "):console.log("Invalid capital data:",a),{id:e,name:t.name.common,favourite:!1,region:t.region,capital:a,flag:t.flags.png,population:t.population}}));this.countries=this.compareList(this.storedFavourite,a)},compareList(t,e){return e.map((e=>{const a=t.find((t=>t.id===e.id));return a?{...e,favourite:a.favourite}:e}))},getFavouriteList(){const t=localStorage.getItem("favouriteList");if(this.storedFavourite=[],t){var e=JSON.parse(t);e.length>1?this.storedFavourite=e.map((t=>({id:t.id,favourite:t.favourite,population:t.population,name:t.name}))):this.storedFavourite.push(e),this.chartData=this.setChartData(this.storedFavourite)}},clearFav(){localStorage.removeItem("favouriteList"),this.storedFavourite=[],this.fetchUsers(),this.chartData=null},saveLocalFav(t){localStorage.setItem("favouriteList",JSON.stringify(t))},removeFromFav(t){const e=this.storedFavourite.findIndex((e=>e.id===t));if(-1!==e){this.storedFavourite.splice(e,1);var a=this.storedFavourite.length;a>=1?this.saveLocalFav(this.storedFavourite):this.clearFav()}else-1==e&&console.log("Error Remove From Favourite")},addToFavourite(t,e){const a=this.countries.find((e=>e.id===t));if(a)if(0==e){a.favourite=!0;var r={id:t,favourite:a.favourite,population:a.population,name:a.name};this.storedFavourite.push(r),this.saveLocalFav(this.storedFavourite),this.chartData=this.setChartData(this.storedFavourite)}else a.favourite=!1,this.removeFromFav(t),this.chartData=this.setChartData(this.storedFavourite);else a||console.log("Error Add To Favourite")},highlightText(t){var e=this.filters["global"].value;if(!e)return t;const a=new RegExp(e,"gi");return t?.replace(a,(t=>`<span class="highlight">${t}</span>`))},setChartData(t){const e=getComputedStyle(document.documentElement);var a=[],r=[];return 0==t.length?(a.push(t),r.push(t)):(a=t.map((t=>t.name)),r=t.map((t=>t.population))),{labels:a,datasets:[{label:"Country Population",backgroundColor:e.getPropertyValue("--blue-500"),borderColor:e.getPropertyValue("--blue-500"),data:r}]}},setChartOptions(){const t=getComputedStyle(document.documentElement),e=t.getPropertyValue("--text-color"),a=t.getPropertyValue("--text-color-secondary"),r=t.getPropertyValue("--surface-border");return{indexAxis:"y",maintainAspectRatio:!1,aspectRatio:.5,plugins:{legend:{labels:{fontColor:e}}},scales:{x:{ticks:{color:a,font:{weight:500}},grid:{display:!1,drawBorder:!1}},y:{ticks:{color:a},grid:{color:r,drawBorder:!1}}}}}},mounted(){this.getFavouriteList(),this.fetchUsers(),this.chartOptions=this.setChartOptions()}}),O=a(89);const P=(0,O.Z)(k,[["render",v]]);var x=P,L=a(7729),_=a(6252),S=a(1299);const D=(0,r.ri)(x);D.use(L.ZP),D.component("Button",T.Z),D.component("DataTable",b.Z),D.component("Column",F.Z),D.component("InputText",C.Z),D.component("Chart",S.Z),D.component("OrganizationChart",_.Z),D.mount("#app")}},e={};function a(r){var o=e[r];if(void 0!==o)return o.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,r,o,n){if(!r){var i=1/0;for(c=0;c<t.length;c++){r=t[c][0],o=t[c][1],n=t[c][2];for(var l=!0,u=0;u<r.length;u++)(!1&n||i>=n)&&Object.keys(a.O).every((function(t){return a.O[t](r[u])}))?r.splice(u--,1):(l=!1,n<i&&(i=n));if(l){t.splice(c--,1);var s=o();void 0!==s&&(e=s)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[r,o,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,r){return a.f[r](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+".ef18f0f9.js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="rest-countries:";a.l=function(r,o,n,i){if(t[r])t[r].push(o);else{var l,u;if(void 0!==n)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var d=s[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==e+n){l=d;break}}l||(u=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",e+n),l.src=r),t[r]=[o];var p=function(e,a){l.onerror=l.onload=null,clearTimeout(f);var o=t[r];if(delete t[r],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((function(t){return t(a)})),e)return e(a)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),u&&document.head.appendChild(l)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/rest-countries/"}(),function(){var t={143:0};a.f.j=function(e,r){var o=a.o(t,e)?t[e]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise((function(a,r){o=t[e]=[a,r]}));r.push(o[2]=n);var i=a.p+a.u(e),l=new Error,u=function(r){if(a.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",l.name="ChunkLoadError",l.type=n,l.request=i,o[1](l)}};a.l(i,u,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,n,i=r[0],l=r[1],u=r[2],s=0;if(i.some((function(e){return 0!==t[e]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(u)var c=u(a)}for(e&&e(r);s<i.length;s++)n=i[s],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(c)},r=self["webpackChunkrest_countries"]=self["webpackChunkrest_countries"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(1653)}));r=a.O(r)})();
//# sourceMappingURL=app.d1fc4a33.js.map